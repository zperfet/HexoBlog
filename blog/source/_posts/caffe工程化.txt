1)方案选择：
https://github.com/BVLC/caffe/pull/1667

cd caffe && mkdir cmake_build && cd cmake_build
cmake .. -DBUILD_SHARED_LIB=ON

2)opencv找不到：
https://github.com/opencv/opencv/issues/6132

solution：
from opencv/build/ copy OpencvConfig.cmake and OpenCVModules.cmake to opencv/cmake/
then in you project delete file build and run again cmake .. and make

3)/usr/bin/ld: cannot find -lopencv_dep_cudart
https://github.com/BVLC/caffe/issues/5031

solution：
1 Once you are in the build directory
ccmake ..
This will open like a gui in the terminal
2 if you press "t" you get all the possible options
3 then I have disable CUDA_USE_STATIC_CUDA_RUNTIME (if you are on teh flag just press enter to enable On or disbale OFF)
4. press c to configure
5 press g to generate
6 make all

how to install ccmake
https://askubuntu.com/questions/121797/how-do-i-install-ccmake
sudo apt-get install cmake-curses-gui

更简单的方法是直接打开Cache文件，将CUDA_USE_STATIC_CUDA_RUNTIME从ON修改为OFF，再继续make

4)
cmake_minimum_required(VERSION 2.8.8)

find_package(Caffe)
include_directories(${Caffe_INCLUDE_DIRS})
add_definitions(${Caffe_DEFINITIONS})    # ex. -DCPU_ONLY

#generate executable file
add_executable(caffeinated_application main.cpp)
#generate .so file
add_library(caffeinated_application main.cpp)
target_link_libraries(caffeinated_application ${Caffe_LIBRARIES})
